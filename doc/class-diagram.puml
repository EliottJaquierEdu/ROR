@startuml

class Address {
  +integer id
  +integer zip
  +string town
  +string street
  +string number
  +Person person
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class Person {
  +string username
  +string lastname
  +string firstname
  +string email
  +string phone_number
  +string encrypted_password
  +string reset_password_token
  +datetime reset_password_sent_at
  +datetime remember_created_at
  +integer sign_in_count
  +datetime current_sign_in_at
  +datetime last_sign_in_at
  +string current_sign_in_ip
  +string last_sign_in_ip
  +integer student_status_id
  +integer teacher_status_id
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
  +Address address
}

class Teacher {
  +string iban
  +TeacherStatus teacher_status
  +SchoolClass[] school_classes
  +Course[] courses
}

class Student {
  +StudentStatus student_status
  +SchoolClass[] school_classes
  +Grade[] grades
}

class SchoolClass {
  +integer year
  +string name
  +Room room
  +Teacher master
  +Person[] people
  +Course[] courses
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class Course {
  +datetime start_at
  +datetime end_at
  +SchoolClass school_class
  +Subject subject
  +Teacher teacher
  +Term term
  +Examination[] examinations
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class Subject {
  +string name
  +Course[] courses
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class Term {
  +string name
  +datetime start_at
  +datetime end_at
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
  +Course[] courses
}

class Examination {
  +string title
  +Course course
  +Grade[] grades
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class Grade {
  +decimal value
  +datetime effective_date
  +Examination examination
  +Person person
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class Room {
  +string name
  +SchoolClass[] school_classes
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class TeacherStatus {
  +string status
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

class StudentStatus {
  +string status
  +datetime archived_at
  +datetime created_at
  +datetime updated_at
}

Address "1" o-- "1" Person
Person "0..*" --o "1" StudentStatus
Person "0..*" --o "1" TeacherStatus
SchoolClass "0..*" -- "0..*" Person
SchoolClass "0..*" --o "1" Room
SchoolClass "0..*" --o "1" Teacher
SchoolClass "1" o-- "0..*" Course
Course "0..*" --o "1" Term
Course "0..*" --o "1" Teacher
Course "1" *-- "1" Subject
Examination "1" *-- "1" Course
Grade "1" *-- "1" Examination
Grade "1" *-- "1" Person

Teacher --|> Person
Student --|> Person

@enduml
